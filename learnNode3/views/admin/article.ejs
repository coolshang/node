<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="/jquery.min.js"></script>
</head>
<body>
<!--    文章标题: <input type="text" class="title"> <br/>
    作者: <input type="text" class="author"> <br/>
    标签: <input type="text" class="tag"> <br/>
    封面: <input type="file" class="art"/> <br/>
    内容: <textarea name="content" id="content" cols="30" rows="10"></textarea><br>
    <input type="submit" value="提交" class="submit">-->
    <form action="/admin/article" enctype="multipart/form-data" method="post">
        文章标题: <input type="text" class="title" name="title"> <br/>
        作者: <input type="text" class="author" name="author"> <br/>
        标签: <input type="text" class="tag" name="tag"> <br/>
        封面: <input type="file" class="art" name="art" multiple/> <br/>
        内容: <textarea name="content" id="content" cols="30" rows="10"></textarea><br>
        <input type="submit" value="提交">
    </form>
    <script>
        $(()=> {
            $('.submit').click(()=>{
                $.ajax({
                    url: '/admin/article',
                    type: 'post',
                    contentType:"multipart/form-data",
                    data: {
                        title : $('.title').val(),
                        author : $('.author').val(),
                        tag: $('.tag').val(),
                        content: $("#content").val(),
                        art: $('.art').val()
                    },
                    success (data){
                        if(data.code == 200){
                            alert(data.msg);
                        }else {
                            console.log(data);
                        }
                    },
                    error (data){
                        console.log(data);
                    }
                });
            })
        })
    </script>
</body>
</html>